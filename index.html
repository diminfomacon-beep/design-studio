<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>D.I.M. Bright Ideas – Design Studio</title>

<!-- Fabric.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#f4f4f4;
}
header{
    background:#0C264D;
    color:white;
    padding:15px;
    text-align:center;
    font-size:20px;
}
.container{
    display:flex;
    flex-wrap:wrap;
}
.controls{
    width:300px;
    background:white;
    padding:15px;
    box-shadow:0 0 10px rgba(0,0,0,.1);
}
.controls h3{
    margin-top:0;
}
.controls input, .controls select{
    width:100%;
    padding:8px;
    margin-bottom:10px;
}
.controls button{
    width:100%;
    padding:10px;
    margin-bottom:8px;
    border:none;
    cursor:pointer;
    border-radius:4px;
    background:#044499;
    color:white;
}
.controls button.red{ background:#ED7800;}
.controls button.green{ background:#28a745;}

.canvas-area{
    flex:1;
    text-align:center;
    padding:20px;
}
#canvas-wrap{
    background:white;
    border:3px solid #333;
    display:inline-block;
}
</style>
</head>

<body>

<header>
D.I.M. Bright Ideas – Custom Print Studio
</header>

<div class="container">

<div class="controls">

<h3>Add Text</h3>
<input type="text" id="textInput" placeholder="Enter text">
<select id="fontSelect">
<option value="Arial">Arial</option>
<option value="Impact">Impact</option>
<option value="Times New Roman">Times New Roman</option>
<option value="Courier New">Courier New</option>
</select>
<input type="number" id="fontSize" value="40">
<input type="color" id="fontColor" value="#000000">
<button onclick="addText()">Add Text</button>

<h3>Upload Logo</h3>
<input type="file" id="upload" accept="image/*">

<h3>Layers</h3>
<button onclick="bringForward()">Bring Forward</button>
<button onclick="sendBackward()">Send Backward</button>

<h3>Canvas</h3>
<input type="color" id="bgColor" value="#ffffff">
<button onclick="changeBackground()">Change Background</button>

<button class="red" onclick="deleteObj()">Delete Selected</button>
<button class="green" onclick="download()">Download Design</button>

</div>

<div class="canvas-area">
<div id="canvas-wrap">
<canvas id="studio" width="600" height="600"></canvas>
</div>
</div>

</div>

<script>

let canvas = new fabric.Canvas('studio',{
    preserveObjectStacking:true
});

// Add Text
function addText(){
    const text = new fabric.IText(
        document.getElementById('textInput').value || "Your Text",
        {
            left:100,
            top:100,
            fontFamily:document.getElementById('fontSelect').value,
            fill:document.getElementById('fontColor').value,
            fontSize:parseInt(document.getElementById('fontSize').value)
        }
    );
    canvas.add(text);
}

// Upload Image
document.getElementById('upload').addEventListener('change',function(e){
    const reader = new FileReader();
    reader.onload = function(f){
        fabric.Image.fromURL(f.target.result,function(img){
            img.scaleToWidth(250);
            canvas.add(img);
        });
    };
    reader.readAsDataURL(e.target.files[0]);
});

// Delete
function deleteObj(){
    canvas.getActiveObjects().forEach(obj => canvas.remove(obj));
    canvas.discardActiveObject();
    canvas.renderAll();
}

// Layer Controls
function bringForward(){
    const obj = canvas.getActiveObject();
    if(obj) canvas.bringForward(obj);
}
function sendBackward(){
    const obj = canvas.getActiveObject();
    if(obj) canvas.sendBackwards(obj);
}

// Background Color
function changeBackground(){
    canvas.setBackgroundColor(
        document.getElementById('bgColor').value,
        canvas.renderAll.bind(canvas)
    );
}

// Download
function download(){
    canvas.discardActiveObject();
    canvas.renderAll();
    const link = document.createElement('a');
    link.download = 'DIM_Design.png';
    link.href = canvas.toDataURL({
        format:'png',
        multiplier:3
    });
    link.click();
}

</script>

</body>
</html>
